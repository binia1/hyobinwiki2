<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ëŒ€ë¬¸ - íš¨ë¹ˆìœ„í‚¤</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700;900&display=swap');
        
        :root { 
            --wiki-main: #7777AA; 
            --wiki-border: #ccc; 
            --wiki-bg: #ffffff; 
            --wiki-text: #373a3c; 
            --wiki-gray-bg: #f9f9f9; 
            --wiki-link: #0055AA;
            --wiki-table-header: #7777AA;
            --wiki-table-header-text: #ffffff;
            --wiki-box-bg: #ffffff;
        }

        /* ë‹¤í¬ ëª¨ë“œ ë³€ìˆ˜ ì¬ì •ì˜ */
        body.dark-mode {
            --wiki-main: #8888CC; /* ë‹¤í¬ëª¨ë“œì—ì„œ ì¡°ê¸ˆ ë” ë°ê²Œ */
            --wiki-border: #444;
            --wiki-bg: #1f2023;
            --wiki-text: #ddd;
            --wiki-gray-bg: #2a2d30;
            --wiki-link: #6699ff;
            --wiki-table-header: #444477;
            --wiki-table-header-text: #eee;
            --wiki-box-bg: #2a2d30;
        }

        body { font-family: 'Noto Sans KR', sans-serif; background-color: var(--wiki-bg); color: var(--wiki-text); line-height: 1.6; word-break: keep-all; margin: 0; transition: background-color 0.3s, color 0.3s; }
        .wiki-container { max-width: 1300px; margin: 0 auto; padding: 20px 40px; border-left: 1px solid var(--wiki-border); border-right: 1px solid var(--wiki-border); min-height: 100vh; background-color: var(--wiki-bg); }

        /* íƒ€ì´í‹€ ìŠ¤íƒ€ì¼ (ëŒ€ë¬¸ìš© ìˆ˜ì •) */
        .txt-lvl-1 { font-size: 2.5rem; font-weight: 900 !important; color: var(--wiki-main); line-height: 1.1; letter-spacing: -1px; margin-bottom: 0; text-align: center; } 
        
        /* ìœ„í‚¤ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .wiki-btn { 
            border: 1px solid var(--wiki-border); background: var(--wiki-box-bg); padding: 4px 12px; border-radius: 4px; font-size: 12px; font-weight: bold; color: var(--wiki-text); 
            cursor: pointer; transition: all 0.2s; display: inline-flex; align-items: center; gap: 4px; text-decoration: none !important; line-height: 1.2; 
        }
        .wiki-btn:hover { background: var(--wiki-gray-bg); filter: brightness(0.9); }

        .wiki-link { color: var(--wiki-link); font-weight: bold; cursor: pointer; text-decoration: none; }
        .wiki-link:hover { text-decoration: underline; }
        
        /* ëŒ€ë¬¸ ì „ìš© ë°•ìŠ¤ ìŠ¤íƒ€ì¼ */
        .main-box { border: 1px solid var(--wiki-border); border-radius: 4px; margin-bottom: 20px; overflow: hidden; background-color: var(--wiki-box-bg); }
        .main-box-header { 
            background: linear-gradient(to right, var(--wiki-main), #8888bb); 
            color: white; 
            padding: 10px 15px; 
            font-weight: bold; 
            font-size: 1.1rem; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
        }
        .main-box-content { padding: 15px; background: var(--wiki-box-bg); font-size: 0.9rem; }
        
        /* í…Œì´ë¸” ìŠ¤íƒ€ì¼ (ìµœê·¼ ë³€ê²½ ë‚´ì—­ ë“±) */
        table.recent-changes { width: 100%; border-collapse: collapse; font-size: 0.85rem; }
        table.recent-changes td { border-bottom: 1px solid var(--wiki-border); padding: 6px 0; }
        table.recent-changes tr:last-child td { border-bottom: none; }
        .time-badge { color: #888; font-size: 0.8rem; margin-right: 5px; }

        /* í•˜ë‹¨ ë„¤ë¹„ë°•ìŠ¤ */
        .nav-box { border: 2px solid var(--wiki-main); margin-top: 40px; font-size: 0.85rem; border-radius: 4px; overflow: hidden; }
        .nav-box-header { background-color: var(--wiki-main); color: white; padding: 8px; font-weight: bold; text-align: center; }
        .nav-box-content { padding: 10px; text-align: center; background: var(--wiki-box-bg); line-height: 2; }

        #wiki-msg-box { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.8); color: white; padding: 10px 24px; border-radius: 50px; font-size: 14px; z-index: 10000; display: none; }
        
        .welcome-search-box {
            text-align: center; padding: 40px 20px; background-color: var(--wiki-gray-bg); 
            border: 1px solid var(--wiki-border); border-radius: 8px; margin-bottom: 30px;
        }

        /* ë¡œê³  ë°•ìŠ¤ ìŠ¤íƒ€ì¼ ì¶”ê°€ */
        .nav-logo-box {
            width: 30px; height: 30px; background: white; color: var(--wiki-main);
            border-radius: 4px; font-weight: 900; display: flex; align-items: center;
            justify-content: center; font-size: 1.2rem;
        }

        /* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
        .modal-overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.5); z-index: 1000; justify-content: center; align-items: center;
        }
        .modal-window {
            background: var(--wiki-bg); color: var(--wiki-text); width: 90%; max-width: 400px;
            padding: 20px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            border: 1px solid var(--wiki-border);
        }
        .modal-header { font-weight: bold; font-size: 1.2rem; margin-bottom: 15px; border-bottom: 2px solid var(--wiki-main); padding-bottom: 5px; }
        .modal-input {
            width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid #ccc; rounded; background: var(--wiki-gray-bg); color: var(--wiki-text);
        }
        .modal-btn {
            width: 100%; padding: 10px; background: var(--wiki-main); color: white; font-weight: bold; border-radius: 4px; margin-top: 10px;
        }
        .modal-btn:hover { opacity: 0.9; }
        .close-btn { float: right; cursor: pointer; color: #888; }
        .modal-link { color: var(--wiki-link); cursor: pointer; text-decoration: none; font-weight: bold; }
        .modal-link:hover { text-decoration: underline; }

        /* ê³µì§€ ë¦¬ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
        .notice-list li { cursor: pointer; padding: 2px 0; }
        .notice-list li:hover { text-decoration: underline; color: var(--wiki-link); }
    </style>
</head>
<body id="body">

    <div id="wiki-msg-box"></div>

    <!-- ìƒë‹¨ ë‚´ë¹„ê²Œì´ì…˜ -->
    <nav class="bg-[#7777AA] text-white p-3 flex justify-between items-center shadow-md sticky top-0 z-50">
        <div class="flex items-center gap-2">
            <div class="nav-logo-box">H</div>
            <a href="index.html" class="font-bold text-xl cursor-pointer no-underline text-white">HyobinWiki</a>
            <div class="hidden md:flex gap-3 text-sm opacity-90 ml-4">
                <a href="index.html" class="hover:underline font-bold text-white no-underline">ëŒ€ë¬¸</a>
                <a href="recent_changes.html" class="hover:underline text-white no-underline">ìµœê·¼ ë³€ê²½</a>
                <a href="recent_discussion.html" class="hover:underline text-white no-underline">ìµœê·¼ í† ë¡ </a>
            </div>
        </div>
        <div class="flex flex-col items-end gap-1">
            <div class="flex items-center gap-2" id="hb-header-search-wrap" style="position:relative;">
                <input type="text" id="headerSearchInput" placeholder="ë¬¸ì„œ ê²€ìƒ‰" class="p-1 px-3 rounded text-black text-sm focus:outline-none border-none shadow-inner w-32 md:w-48" onkeypress="if(event.keyCode==13) { handleSearch('headerSearchInput'); }">
                <button onclick="handleSearch('headerSearchInput')" class="bg-[#555588] p-1 px-3 rounded text-xs transition-colors shadow-inner font-bold">ğŸ”</button>
            </div>
            <div class="flex gap-1" id="auth-buttons">
                <!-- ë¡œê·¸ì¸ ì „ -->
                <button onclick="toggleModal('loginModal')" class="bg-[#666699] hover:bg-[#555588] text-white text-xs px-2 py-0.5 rounded transition-colors" id="btn-login">ë¡œê·¸ì¸</button>
                <!-- ë¡œê·¸ì¸ í›„ -->
                <button onclick="toggleModal('settingsModal')" class="bg-[#666699] hover:bg-[#555588] text-white text-xs px-2 py-0.5 rounded transition-colors">ì„¤ì •</button>
            </div>
        </div>
    </nav>

    <div class="wiki-container shadow-lg">
        
        <!-- ëŒ€ë¬¸ í™˜ì˜ ì˜ì—­ & ì¤‘ì•™ ê²€ìƒ‰ -->
        <div class="welcome-search-box">
            <div class="txt-lvl-1 mb-4">HyobinWiki</div>
            <p class="mb-6 text-[var(--wiki-text)] opacity-80">ì—¬ëŸ¬ë¶„ì´ ê°€ê¾¸ì–´ ë‚˜ê°€ëŠ” ì§€ì‹ì˜ ë‚˜ë¬´, <strong>íš¨ë¹ˆìœ„í‚¤</strong>ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤.<br>ëˆ„êµ¬ë‚˜ ììœ ë¡­ê²Œ ë¬¸ì„œë¥¼ ìƒì„±í•˜ê³  í¸ì§‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            
            <div class="flex justify-center items-center gap-2 max-w-lg mx-auto" id="hb-main-search-wrap" style="position:relative;">
              <input type="text" id="mainSearchInput" placeholder="ë¬¸ì„œ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" class="flex-grow p-3 border-2 border-[#7777AA] rounded-l-lg focus:outline-none shadow-sm" autocomplete="off">
              <button type="button" onclick="handleSearch('mainSearchInput')" class="bg-[#7777AA] text-white p-3.5 px-6 rounded-r-lg font-bold hover:bg-[#666699] transition-colors">ì´ë™</button>
            </div>

            <div class="mt-4 text-sm text-gray-500">
                ì¸ê¸° ê²€ìƒ‰ì–´: <a href="íš¨ë¹ˆê´‘ì—­ì‹œ.html" class="wiki-link">íš¨ë¹ˆê´‘ì—­ì‹œ</a>, <a href="ë°•íš¨ë¹ˆ.html" class="wiki-link">ë°•íš¨ë¹ˆ</a>, <a href="ìœ¤ëŒ€í™˜.html" class="wiki-link">ìœ¤ëŒ€í™˜</a>, <a href="íš¨ë¹ˆë„ì‹œì² ë„.html" class="wiki-link">íš¨ë¹ˆë„ì‹œì² ë„</a>
            </div>
        </div>

        <!-- 2ë‹¨ ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            
            <!-- ì™¼ìª½ ì»¬ëŸ¼ -->
            <div class="flex flex-col gap-4">
                <!-- ìœ„í‚¤ ê³µì§€ -->
                <div class="main-box shadow-sm">
                    <div class="main-box-header">
                        <span>ğŸ“¢ ìœ„í‚¤ ê³µì§€ì‚¬í•­</span>
                        <a href="#" class="text-xs text-white opacity-80 hover:opacity-100 hover:underline">ë”ë³´ê¸°</a>
                    </div>
                    <div class="main-box-content">
                        <ul class="list-disc pl-5 space-y-1 text-sm notice-list">
                            <li onclick="openNotice(1)"><span class="font-bold text-[#7777AA]">[í•„ë…]</span> íš¨ë¹ˆìœ„í‚¤ í¸ì§‘ ê·œì • ê°œì • ì•ˆë‚´ (2025.01.04)</li>
                            <li onclick="openNotice(2)">íš¨ë¹ˆê´‘ì—­ì‹œ ê´€ë ¨ ë¬¸ì„œ ì‘ì„± ê°€ì´ë“œë¼ì¸</li>
                            <li onclick="openNotice(3)" class="text-red-500 font-bold">ìœ¤ëŒ€í™˜ ì „ ì‹œì¥ ê´€ë ¨ ë¬¸ì„œ í›¼ì† ì£¼ì˜ ìš”ë§</li>
                            <li onclick="openNotice(4)">ê´€ë¦¬ì ëª¨ì§‘ ê³µê³  (ìƒì‹œ ëª¨ì§‘)</li>
                        </ul>
                    </div>
                </div>

                <!-- ì˜¤ëŠ˜ì˜ ì¶”ì²œ ë¬¸ì„œ -->
                <div class="main-box shadow-sm">
                    <div class="main-box-header">
                        <span>â­ ì˜¤ëŠ˜ì˜ ì¶”ì²œ ë¬¸ì„œ</span>
                        <button class="text-xs bg-white text-[#7777AA] px-2 py-0.5 rounded font-bold hover:bg-gray-100">ìƒˆë¡œê³ ì¹¨</button>
                    </div>
                    <div class="main-box-content flex gap-4">
                        <div class="shrink-0">
                            <img src="hyobin1.png" class="rounded border border-gray-200">
                        </div>
                        <div>
                            <a href="íš¨ë¹ˆê´‘ì—­ì‹œ.html" class="wiki-link text-lg block mb-1">íš¨ë¹ˆê´‘ì—­ì‹œ</a>
                            <p class="text-sm text-[var(--wiki-text)] opacity-80 line-clamp-3">
                                íš¨ë¹ˆê´‘ì—­ì‹œ(å­å½¬å»£åŸŸå¸‚)ëŠ” ëŒ€í•œë¯¼êµ­ ì¤‘ë¶€ê¶Œì— ìœ„ì¹˜í•œ ê±°ì  ê´‘ì—­ì‹œì´ë‹¤. ë°•íš¨ë¹ˆ ì‹œì¥ì´ ì‹œì •ì„ ì´ëŒê³  ìˆìœ¼ë©°, 8ê°œì˜ ë„ì‹œì² ë„ ë…¸ì„ ê³¼ íš¨ë¹ˆê³ ì†ë²„ìŠ¤í„°ë¯¸ë„ì„ ì¤‘ì‹¬ìœ¼ë¡œ êµí†µì´ ë°œë‹¬í•´ ìˆë‹¤. ë¶êµ¬, ë‚¨êµ¬, ë™êµ¬ ë“±ìœ¼ë¡œ í–‰ì •êµ¬ì—­ì´ ë‚˜ë‰˜ì–´ ìˆë‹¤...
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ì˜¤ë¥¸ìª½ ì»¬ëŸ¼ -->
            <div class="flex flex-col gap-4">
                <!-- ìµœê·¼ ë³€ê²½ ë‚´ì—­ -->
                <div class="main-box shadow-sm">
                    <div class="main-box-header">
                        <span>ğŸ•’ ìµœê·¼ ë³€ê²½ ë‚´ì—­</span>
                        <a href="#" class="text-xs text-white opacity-80 hover:opacity-100 hover:underline">ë”ë³´ê¸°</a>
                    </div>
                    <div class="main-box-content">
                        <table class="recent-changes">
                            <tr>
                                <td><a href="íš¨ë¹ˆì—­(ì¼ë°˜ì—´ì°¨).html" class="wiki-link">íš¨ë¹ˆì—­(ì¼ë°˜ì² ë„)</a></td>
                                <td class="text-right"><span class="time-badge">12ì´ˆ ì „</span> <span class="text-green-600 text-xs text-xs">(+243)</span></td>
                            </tr>
                            <tr>
                                <td><a href="ìœ¤ëŒ€í™˜.html" class="wiki-link">ìœ¤ëŒ€í™˜</a></td>
                                <td class="text-right"><span class="time-badge">45ì´ˆ ì „</span> <span class="text-red-500 text-xs">(-512)</span></td>
                            </tr>
                            <tr>
                                <td><a href="1í˜¸ì„ .html" class="wiki-link">íš¨ë¹ˆë„ì‹œì² ë„ 1í˜¸ì„ </a></td>
                                <td class="text-right"><span class="time-badge">1ë¶„ ì „</span> <span class="text-green-600 text-xs">(+52)</span></td>
                            </tr>
                            <tr>
                                <td><a href="íš¨ë¹ˆëŒ€í•™êµ.html" class="wiki-link">íš¨ë¹ˆëŒ€í•™êµ</a></td>
                                <td class="text-right"><span class="time-badge">3ë¶„ ì „</span> <span class="text-green-600 text-xs">(+88)</span></td>
                            </tr>
                            <tr>
                                <td><a href="ê³ ì†¡êµì°¨ë¡œì—­.html" class="wiki-link">ê³ ì†¡êµì°¨ë¡œì—­</a></td>
                                <td class="text-right"><span class="time-badge">5ë¶„ ì „</span> <span class="text-gray-500 text-xs">(0)</span></td>
                            </tr>
                        </table>
                    </div>
                </div>

                <!-- ì‹¤ì‹œê°„ ê²€ìƒ‰ì–´ -->
                <div class="main-box shadow-sm">
                    <div class="main-box-header">
                        <span>ğŸ”¥ ì‹¤ì‹œê°„ ì¸ê¸° ê²€ìƒ‰ì–´</span>
                    </div>
                    <div class="main-box-content p-0">
                        <ol class="list-decimal pl-10 py-2 space-y-1 text-sm font-bold text-[#555]">
                            <li><a href="ë°•íš¨ë¹ˆ.html" class="wiki-link text-[var(--wiki-text)]">ë°•íš¨ë¹ˆ</a></li>
                            <li><a href="íš¨ë¹ˆê³ ì†ë²„ìŠ¤í„°ë¯¸ë„.html" class="wiki-link text-[var(--wiki-text)]">íš¨ë¹ˆê³ ì†ë²„ìŠ¤í„°ë¯¸ë„</a></li>
                            <li><a href="8í˜¸ì„ .html" class="wiki-link text-[var(--wiki-text)]">íš¨ë¹ˆë„ì‹œì² ë„ 8í˜¸ì„ </a></li>
                            <li><a href="ê³ ì†¡ë™.html" class="wiki-link text-[var(--wiki-text)]">ê³ ì†¡ë™</a></li>
                            <li><a href="ë„ë³€ì—­.html" class="wiki-link text-[var(--wiki-text)]">ë„ë³€ì—­</a></li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>

        <!-- í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ë°•ìŠ¤ (ë¶„ë¥˜) -->
        <div class="nav-box shadow-sm mt-6">
            <div class="nav-box-header">íš¨ë¹ˆìœ„í‚¤ ë¶„ë¥˜</div>
            <div class="nav-box-content leading-loose text-sm grid grid-cols-2 md:grid-cols-4 gap-2 text-center">
                <a href="íš¨ë¹ˆê´‘ì—­ì‹œ.html" class="wiki-link">íš¨ë¹ˆê´‘ì—­ì‹œ</a>
                <a href="ë°•íš¨ë¹ˆ.html" class="wiki-link">ì¸ë¬¼</a>
                <a href="íš¨ë¹ˆë„ì‹œì² ë„.html" class="wiki-link">êµí†µ</a>
                <a href="íš¨ë¹ˆëŒ€í•™êµ.html" class="wiki-link">êµìœ¡</a>
                <a href="ë¶êµ¬.html" class="wiki-link">í–‰ì •êµ¬ì—­(ë¶êµ¬)</a>
                <a href="ë‚¨êµ¬.html" class="wiki-link">í–‰ì •êµ¬ì—­(ë‚¨êµ¬)</a>
                <a href="ë™êµ¬.html" class="wiki-link">í–‰ì •êµ¬ì—­(ë™êµ¬)</a>
                <a href="ìœ¤ëŒ€í™˜.html" class="wiki-link">ì‚¬ê±´ì‚¬ê³ </a>
            </div>
        </div>

        <footer class="mt-20 border-t pt-10 text-center text-gray-400 text-xs pb-10">
            <p class="mb-2">ëª¨ë“  ë¬¸ì„œëŠ” í¬ë¦¬ì—ì´í‹°ë¸Œ ì»¤ë¨¼ì¦ˆ ì €ì‘ìí‘œì‹œ-ë™ì¼ì¡°ê±´ë³€ê²½í—ˆë½ 4.0ì— ë”°ë¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            ë³¸ ë¬¸ì„œì˜ ì €ì‘ê¶Œì€ íš¨ë¹ˆìœ„í‚¤ì— ìˆìŠµë‹ˆë‹¤.
        </footer>
    </div>

    <!-- ë¡œê·¸ì¸ ëª¨ë‹¬ -->
    <div id="loginModal" class="modal-overlay">
        <div class="modal-window">
            <div class="modal-header">
                ë¡œê·¸ì¸ <span class="close-btn" onclick="toggleModal('loginModal')">&times;</span>
            </div>
            <input type="text" id="loginId" class="modal-input" placeholder="ì•„ì´ë””">
            <input type="password" id="loginPw" class="modal-input" placeholder="ë¹„ë°€ë²ˆí˜¸" onkeypress="if(event.keyCode==13) doLogin()">
            <button class="modal-btn" onclick="doLogin()">ë¡œê·¸ì¸</button>
            <div class="text-xs text-center mt-3 text-gray-500">
                ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”? 
                <span class="modal-link" onclick="toggleModal('loginModal'); toggleModal('signupModal');">íšŒì›ê°€ì…</span>
            </div>
        </div>
    </div>

    <!-- íšŒì›ê°€ì… ëª¨ë‹¬ -->
    <div id="signupModal" class="modal-overlay">
        <div class="modal-window">
            <div class="modal-header">
                íšŒì›ê°€ì… <span class="close-btn" onclick="toggleModal('signupModal')">&times;</span>
            </div>
            <input type="text" id="signupId" class="modal-input" placeholder="ì•„ì´ë””">
            <input type="password" id="signupPw" class="modal-input" placeholder="ë¹„ë°€ë²ˆí˜¸">
            <input type="password" id="signupPwConfirm" class="modal-input" placeholder="ë¹„ë°€ë²ˆí˜¸ í™•ì¸" onkeypress="if(event.keyCode==13) doSignup()">
            <button class="modal-btn" onclick="doSignup()">ê°€ì…í•˜ê¸°</button>
            <div class="text-xs text-center mt-3 text-gray-500">
                ì´ë¯¸ ê³„ì •ì´ ìˆìœ¼ì‹ ê°€ìš”? 
                <span class="modal-link" onclick="toggleModal('signupModal'); toggleModal('loginModal');">ë¡œê·¸ì¸</span>
            </div>
        </div>
    </div>

    <!-- ì„¤ì • ëª¨ë‹¬ -->
    <div id="settingsModal" class="modal-overlay">
        <div class="modal-window">
            <div class="modal-header">
                íš¨ë¹ˆìœ„í‚¤ ì„¤ì • <span class="close-btn" onclick="toggleModal('settingsModal')">&times;</span>
            </div>
            
            <div class="flex items-center justify-between mb-4">
                <span>ğŸŒ™ ë‹¤í¬ ëª¨ë“œ</span>
                <input type="checkbox" id="darkModeCheck" onchange="toggleDarkMode()" class="w-5 h-5 accent-[#7777AA]">
            </div>
            
            <div class="mb-2">
                <div class="flex justify-between mb-1">
                    <span>ğŸ”  ê¸€ì í¬ê¸°</span>
                    <span id="fontSizeVal">100%</span>
                </div>
                <input type="range" id="fontSizeRange" min="80" max="130" value="100" step="5" class="w-full accent-[#7777AA]" oninput="changeFontSize(this.value)">
            </div>

            <button class="modal-btn mt-4" onclick="toggleModal('settingsModal')">ë‹«ê¸°</button>
        </div>
    </div>

    <!-- ê³µì§€ì‚¬í•­ ìƒì„¸ ëª¨ë‹¬ -->
    <div id="noticeModal" class="modal-overlay">
        <div class="modal-window" style="max-width: 500px;">
            <div class="modal-header">
                <span id="noticeTitle">ê³µì§€ì‚¬í•­</span> 
                <span class="close-btn" onclick="toggleModal('noticeModal')">&times;</span>
            </div>
            <div id="noticeContent" class="text-sm leading-relaxed whitespace-pre-line text-gray-700 dark:text-gray-300">
                ë‚´ìš©ì´ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
            </div>
            <button class="modal-btn mt-4 bg-gray-500 hover:bg-gray-600" onclick="toggleModal('noticeModal')">ë‹«ê¸°</button>
        </div>
    </div>

    <script>
        // ì´ˆê¸° ë¡œë“œ ì‹œ ì €ì¥ëœ ì„¤ì • ì ìš©
        window.onload = function() {
            // ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸
            const user = localStorage.getItem('hb_user');
            if (user) {
                setLoginState(user);
            }

            // ë‹¤í¬ëª¨ë“œ í™•ì¸
            const isDark = localStorage.getItem('hb_dark_mode') === 'true';
            if (isDark) {
                document.body.classList.add('dark-mode');
                document.getElementById('darkModeCheck').checked = true;
            }

            // í°íŠ¸ í¬ê¸° í™•ì¸
            const fontSize = localStorage.getItem('hb_font_size');
            if (fontSize) {
                document.body.style.fontSize = fontSize + '%';
                document.getElementById('fontSizeRange').value = fontSize;
                document.getElementById('fontSizeVal').innerText = fontSize + '%';
            }
        }

        // ê³µì§€ì‚¬í•­ ë°ì´í„°
        const noticeData = {
            1: {
                title: "[í•„ë…] íš¨ë¹ˆìœ„í‚¤ í¸ì§‘ ê·œì • ê°œì • ì•ˆë‚´",
                content: "2025ë…„ 1ì›” 4ì¼ë¶€ë¡œ íš¨ë¹ˆìœ„í‚¤ì˜ ê¸°ë³¸ í¸ì§‘ ê·œì •ì´ ê°œì •ë˜ì—ˆìŠµë‹ˆë‹¤.\n\nì£¼ìš” ë³€ê²½ ì‚¬í•­:\n1. ì¶œì²˜ ë¶ˆë¶„ëª…í•œ ì¹´ë”ë¼ í†µì‹  ì„œìˆ  ê¸ˆì§€ ê°•í™”\n2. ë¬¸ì„œ ì‚¬ìœ í™” ì‹œë„ ì‹œ ì¦‰ê° ì°¨ë‹¨ ì¡°ì¹˜\n3. í† ë¡  í•©ì˜ ì—†ëŠ” ëŒ€ê·œëª¨ ì‚­ì œ ê¸ˆì§€\n\nëª¨ë“  ì´ìš©ìë¶„ë“¤ì€ ê°œì •ëœ ê·œì •ì„ ë°˜ë“œì‹œ ìˆ™ì§€í•´ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤."
            },
            2: {
                title: "íš¨ë¹ˆê´‘ì—­ì‹œ ê´€ë ¨ ë¬¸ì„œ ì‘ì„± ê°€ì´ë“œë¼ì¸",
                content: "íš¨ë¹ˆê´‘ì—­ì‹œ ì„¸ê³„ê´€ ë¬¸ì„œë¥¼ ì‘ì„±í•  ë•ŒëŠ” í˜„ì‹¤ì„±ì„ ìœ ì§€í•´ì£¼ì‹­ì‹œì˜¤.\n\n- ì‹¤ì¡´í•˜ì§€ ì•ŠëŠ” ì§€ëª…ì´ë‚˜ ê¸°ê´€ì„ ì°½ì‘í•  ë•ŒëŠ” ê¸°ì¡´ íš¨ë¹ˆê´‘ì—­ì‹œ ì„¤ì •ê³¼ ì¶©ëŒí•˜ì§€ ì•Šë„ë¡ ì£¼ì˜ ë°”ëë‹ˆë‹¤.\n- ì§€ë‚˜ì¹˜ê²Œ ë¨¼ì¹˜í‚¨ìŠ¤ëŸ¬ìš´ ì„¤ì •ì´ë‚˜ ê°œì—°ì„± ì—†ëŠ” ì„œìˆ ì€ ê´€ë¦¬ìì— ì˜í•´ ë°˜ë ¤ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤."
            },
            3: {
                title: "ìœ¤ëŒ€í™˜ ì „ ì‹œì¥ ê´€ë ¨ ë¬¸ì„œ í›¼ì† ì£¼ì˜ ìš”ë§",
                content: "ìµœê·¼ 'ìœ¤ëŒ€í™˜' ì „ ì‹œì¥ ë¬¸ì„œ ë° ê´€ë ¨ ë¬¸ì„œì—ì„œ ì¼ë¶€ ì˜¹í˜¸ìë“¤ì´ ê³¼ë„í•œ ë¯¸í™” ë° ì°¬ì–‘ ì„œìˆ ì„ ì‹œë„í•˜ë‹¤ê°€, ë‹¤ìˆ˜ì˜ ì´ìš©ìë“¤ë¡œë¶€í„° ê±°ì„¼ ë¹„ë‚œ(ìŒìš• ë“±)ì„ ë“£ê³  ì°¨ë‹¨ë˜ëŠ” ì‚¬ë¡€ê°€ ë¹ˆë²ˆí•˜ê²Œ ë°œìƒí•˜ê³  ìˆìŠµë‹ˆë‹¤.\n\níŠ¹íˆ ì •ì¹˜ì  í¸í–¥ì„±ì´ ì§™ì€ ë§¹ëª©ì ì¸ ì˜¹í˜¸ ì„œìˆ ì€ ìœ„í‚¤ì˜ ì¤‘ë¦½ì„±ì„ í›¼ì†í•  ë¿ë§Œ ì•„ë‹ˆë¼, ì»¤ë®¤ë‹ˆí‹° ë‚´ ë¶ˆí•„ìš”í•œ ë¶„ìŸê³¼ ì¸ì‹ ê³µê²©ì„ ìœ ë°œí•©ë‹ˆë‹¤.\n\nì´ëŸ¬í•œ í–‰ìœ„ëŠ” íš¨ë¹ˆìœ„í‚¤ ìš´ì˜ ì›ì¹™ì— ìœ„ë°°ë˜ë©°, ê²½ê³  ì—†ì´ í¸ì§‘ê¶Œì´ ì œí•œë  ìˆ˜ ìˆìŒì„ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤. ëª¨ë“  ì„œìˆ ì€ ê°ê´€ì  ì‚¬ì‹¤ì— ê¸°ë°˜í•˜ì—¬ ì¤‘ë¦½ì ìœ¼ë¡œ ì‘ì„±í•´ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤."
            },
            4: {
                title: "ê´€ë¦¬ì ëª¨ì§‘ ê³µê³  (ìƒì‹œ ëª¨ì§‘)",
                content: "íš¨ë¹ˆìœ„í‚¤ë¥¼ ê¹¨ë—í•˜ê³  ìœ ìµí•œ ê³µê°„ìœ¼ë¡œ ë§Œë“¤ì–´ê°ˆ ê´€ë¦¬ìë¥¼ ëª¨ì‹­ë‹ˆë‹¤.\n\nìê²© ìš”ê±´:\n- ê°€ì… í›„ 30ì¼ ê²½ê³¼, í¸ì§‘ íšŸìˆ˜ 50íšŒ ì´ìƒ\n- ìµœê·¼ 3ê°œì›” ë‚´ ì°¨ë‹¨ ì´ë ¥ì´ ì—†ëŠ” ì´ìš©ì\n- ì¤‘ë¦½ì ì¸ ì‹œê°ìœ¼ë¡œ ë¶„ìŸì„ ì¡°ì •í•  ìˆ˜ ìˆëŠ” ë¶„\n\nê´€ì‹¬ ìˆìœ¼ì‹  ë¶„ë“¤ì€ 'ìœ„í‚¤ ìš´ì˜' ê²Œì‹œíŒì„ í†µí•´ ì§€ì›í•´ì£¼ì„¸ìš”."
            }
        };

        // ê³µì§€ì‚¬í•­ ì—´ê¸° í•¨ìˆ˜
        function openNotice(id) {
            const data = noticeData[id];
            if (data) {
                document.getElementById('noticeTitle').innerText = data.title;
                document.getElementById('noticeContent').innerText = data.content;
                toggleModal('noticeModal');
            }
        }

        // ê²€ìƒ‰ ê¸°ëŠ¥ (ìˆ«ì ì…ë ¥ ì‹œ ë²„ìŠ¤ ë¬¸ì„œë¡œ ì´ë™)
        function handleSearch(inputId) {
            const id = inputId || 'headerSearchInput';
            const inputElement = document.getElementById(id);
            if (!inputElement) return;
            const query = inputElement.value.trim();
            
            if (query) {
                // ìˆ«ìì¸ì§€ í™•ì¸ (ì •ê·œì‹ ì‚¬ìš©)
                const isNumber = /^\d+$/.test(query);
                
                if (isNumber) {
                    window.location.href = "bus_" + query + ".html";
                } else {
                    window.location.href = query + ".html";
                }
            } else {
                showMsg('ë¬¸ì„œ ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
            }
        }

        // ë©”ì‹œì§€ ë°•ìŠ¤
        function showMsg(text) {
            const box = document.getElementById('wiki-msg-box');
            box.innerText = text; 
            box.style.display = 'block';
            setTimeout(() => { box.style.display = 'none'; }, 2000);
        }

        // ëª¨ë‹¬ í† ê¸€
        function toggleModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal.style.display === 'flex') {
                modal.style.display = 'none';
            } else {
                modal.style.display = 'flex';
                // í¬ì»¤ìŠ¤ ì„¤ì •
                if(modalId === 'loginModal') {
                    setTimeout(() => document.getElementById('loginId').focus(), 100);
                } else if(modalId === 'signupModal') {
                    setTimeout(() => document.getElementById('signupId').focus(), 100);
                }
            }
        }

        // --- íšŒì›ê°€ì… ë° ë¡œê·¸ì¸ ë¡œì§ ---
        
        function doSignup() {
            const id = document.getElementById('signupId').value.trim();
            const pw = document.getElementById('signupPw').value;
            const pwConfirm = document.getElementById('signupPwConfirm').value;

            if (!id || !pw) {
                showMsg('ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            if (pw !== pwConfirm) {
                showMsg('ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                return;
            }

            const users = JSON.parse(localStorage.getItem('hb_db_users') || '{}');

            if (users[id]) {
                showMsg('ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì•„ì´ë””ì…ë‹ˆë‹¤.');
                return;
            }

            users[id] = pw;
            localStorage.setItem('hb_db_users', JSON.stringify(users));

            showMsg('íšŒì›ê°€ì… ì™„ë£Œ! ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.');
            
            toggleModal('signupModal');
            toggleModal('loginModal');
            
            document.getElementById('loginId').value = id;
            document.getElementById('loginPw').focus();
        }

        function doLogin() {
            const id = document.getElementById('loginId').value.trim();
            const pw = document.getElementById('loginPw').value;

            if (!id || !pw) {
                showMsg('ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.');
                return;
            }

            const users = JSON.parse(localStorage.getItem('hb_db_users') || '{}');

            if (users.hasOwnProperty(id)) {
                if (users[id] === pw) {
                    localStorage.setItem('hb_user', id);
                    setLoginState(id);
                    toggleModal('loginModal');
                    showMsg(id + 'ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤!');
                } else {
                    showMsg('ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤.');
                }
            } else {
                showMsg('ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì•„ì´ë””ì…ë‹ˆë‹¤. íšŒì›ê°€ì…ì„ í•´ì£¼ì„¸ìš”.');
            }
        }

        function doLogout() {
            localStorage.removeItem('hb_user');
            location.reload();
        }

        function setLoginState(username) {
            const container = document.getElementById('auth-buttons');
            container.innerHTML = `
                <button class="bg-[#555] text-white text-xs px-2 py-0.5 rounded cursor-default">ğŸ‘¤ ${username}</button>
                <button onclick="doLogout()" class="bg-[#666699] hover:bg-[#555588] text-white text-xs px-2 py-0.5 rounded transition-colors">ë¡œê·¸ì•„ì›ƒ</button>
                <button onclick="toggleModal('settingsModal')" class="bg-[#666699] hover:bg-[#555588] text-white text-xs px-2 py-0.5 rounded transition-colors">ì„¤ì •</button>
            `;
        }

        function toggleDarkMode() {
            const body = document.body;
            body.classList.toggle('dark-mode');
            const isDark = body.classList.contains('dark-mode');
            localStorage.setItem('hb_dark_mode', isDark);
        }

        function changeFontSize(val) {
            document.body.style.fontSize = val + '%';
            document.getElementById('fontSizeVal').innerText = val + '%';
            localStorage.setItem('hb_font_size', val);
        }

        window.onclick = function(event) {
            if (event.target.classList.contains('modal-overlay')) {
                event.target.style.display = 'none';
            }
        }
    </script>

    <!-- âœ… ê²€ìƒ‰ ë³´ì™„ ìŠ¤í¬ë¦½íŠ¸ (ì—°ê´€ê²€ìƒ‰ + '_'=ë„ì–´ì“°ê¸° ë™ë“± ì²˜ë¦¬ + í—¤ë”/ëŒ€ë¬¸ ëª¨ë‘ ì ìš©) -->
    <script>
    (function(){
      // ===== HyobinWiki Search Enhancer (index) =====
      const MAX_RECENT = 8;
      const RECENT_KEY = "hb_recent_searches";

      function norm(s){ return (s||"").toString().trim(); }
      // '_'ì™€ ê³µë°±ì„ ë™ë“± ì·¨ê¸‰: ê²€ìƒ‰í‚¤ëŠ” ëª¨ë‘ 'ê³µë°±'ìœ¼ë¡œ í†µì¼
      function toKey(s){
        return norm(s)
          .replace(/_/g, " ")
          .replace(/\s+/g, " ")
          .trim()
          .toLowerCase();
      }
      // ê³µë°± ì œê±°í•œ ì»´íŒ©íŠ¸ í‚¤: 'íš¨ë¹ˆë„ì‹œì² ë„' ê°™ì´ ë¶™ì—¬ì³ë„ ë§¤ì¹­
      function toCompactKey(s){ return toKey(s).replace(/\s+/g, ""); }

      function loadRecent(){
        try{ return JSON.parse(localStorage.getItem(RECENT_KEY)||"[]") || []; }catch(e){ return []; }
      }
      function saveRecent(list){
        try{ localStorage.setItem(RECENT_KEY, JSON.stringify(list.slice(0,MAX_RECENT))); }catch(e){}
      }
      function pushRecent(q){
        q = norm(q);
        if(!q) return;
        const k = toKey(q);
        const list = loadRecent().filter(x=>toKey(x)!==k);
        list.unshift(q);
        saveRecent(list);
      }

      // hrefì—ì„œ íŒŒì¼ëª…(í™•ì¥ì ì œì™¸)ì„ ì¶”ì¶œí•˜ê³ , ë””ì½”ë“œí•˜ì—¬ ê²€ìƒ‰í‚¤ë¡œë„ í™œìš©
      function hrefBaseName(href){
        try{
          const h = (href||"").split("?")[0].split("#")[0];
          const base = h.replace(/^.*\//, "").replace(/\.html$/i, "");
          return decodeURIComponent(base);
        }catch(e){
          return (href||"").replace(/^.*\//, "").replace(/\.html.*$/i, "");
        }
      }

      function collectWikiLinks(){
        const a = Array.from(document.querySelectorAll('a[href]'));
        const seen = new Set();
        const list = [];
        a.forEach(el=>{
          const href = el.getAttribute("href") || "";
          if(/^https?:\/\//i.test(href)) return;
          if(href.startsWith("#")) return;
          if(!/\.html(\?|#|$)/i.test(href)) return;

          const base = hrefBaseName(href);
          const titleText = norm(el.textContent);
          const title = titleText || base;

          const key = toKey(title);
          const compact = toCompactKey(title);
          const fileKey = toKey(base);
          const fileCompact = toCompactKey(base);

          // title + href ì¡°í•© ì¤‘ë³µ ì œê±°
          const uniq = key + "|" + href;
          if(seen.has(uniq)) return;
          seen.add(uniq);

          list.push({ title, href, key, compact, fileKey, fileCompact });
        });
        return list;
      }

      const WIKI_LIST = collectWikiLinks();

      function score(item, q){
        const qKey = toKey(q);
        const qComp = toCompactKey(q);
        if(!qKey) return 0;

        // 1) title ê¸°ì¤€ ë§¤ì¹­
        if(item.key === qKey) return 120;
        if(item.key.startsWith(qKey)) return 80;
        if(item.key.includes(qKey)) return 50;
        // 2) íŒŒì¼ëª…(í™•ì¥ì ì œì™¸) ê¸°ì¤€ ë§¤ì¹­
        if(item.fileKey === qKey) return 110;
        if(item.fileKey.startsWith(qKey)) return 70;
        if(item.fileKey.includes(qKey)) return 45;
        // 3) ê³µë°± ì œê±°(ë¶™ì—¬ì“°ê¸°/ì–¸ë”ë°” ì°¨ì´ í¡ìˆ˜)
        if(qComp && (item.compact.includes(qComp) || item.fileCompact.includes(qComp))) return 35;

        return 0;
      }

      function ensureDropdown(input, wrap){
        const wrapEl = wrap || input.parentElement;
        if(wrapEl && getComputedStyle(wrapEl).position === "static") wrapEl.style.position = "relative";

        let dd = wrapEl.querySelector(`.hb-autocomplete[data-for="${input.id}"]`);
        if(!dd){
          dd = document.createElement("div");
          dd.className = "hb-autocomplete";
          dd.dataset.for = input.id;
          dd.style.position = "absolute";
          dd.style.left = "0";
          dd.style.right = "0";
          dd.style.top = "100%";
          dd.style.marginTop = "8px";
          dd.style.background = "var(--wiki-box-bg)";
          dd.style.border = "1px solid rgba(0,0,0,0.12)";
          dd.style.borderRadius = "12px";
          dd.style.boxShadow = "0 10px 25px rgba(0,0,0,0.15)";
          dd.style.overflow = "hidden";
          dd.style.zIndex = "9999";
          dd.style.maxHeight = "280px";
          dd.style.overflowY = "auto";
          dd.style.display = "none";
          wrapEl.appendChild(dd);
        }
        return dd;
      }

      function hide(dd){ if(dd) dd.style.display = "none"; }
      function show(dd){ if(dd) dd.style.display = "block"; }

      function renderDropdown(dd, input, q){
        dd.innerHTML = "";
        const query = norm(q);
        const recent = loadRecent();

        const mkRow = (label, cb, muted=false, rightText="") => {
          const row = document.createElement("button");
          row.type = "button";
          row.style.display = "flex";
          row.style.width = "100%";
          row.style.alignItems = "center";
          row.style.justifyContent = "space-between";
          row.style.gap = "12px";
          row.style.padding = "10px 12px";
          row.style.fontSize = "13px";
          row.style.background = "var(--wiki-box-bg)";
          row.style.border = "0";
          row.style.textAlign = "left";
          row.style.cursor = muted ? "default" : "pointer";
          row.onmouseenter = ()=>{ if(!muted) row.style.background = "rgba(0,0,0,0.04)"; };
          row.onmouseleave = ()=>{ row.style.background = "var(--wiki-box-bg)"; };
          row.innerHTML = `
            <span style="color:${muted?'#888':'var(--wiki-text)'}">${label}</span>
            ${rightText ? `<span style=\"font-size:11px; color:#888;\">${rightText}</span>` : ""}
          `;
          if(!muted) row.addEventListener("click", cb);
          dd.appendChild(row);
          return row;
        };

        // ì…ë ¥ì´ ë¹„ì–´ ìˆìœ¼ë©´: ìµœê·¼ ê²€ìƒ‰ì–´
        if(!query){
          const head = mkRow("ìµœê·¼ ê²€ìƒ‰ì–´", ()=>{}, true);
          head.style.fontWeight = "900";

          if(recent.length === 0){
            mkRow("ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”", ()=>{}, true);
          } else {
            recent.forEach(r=>{
              mkRow(r, ()=>{ input.value = r; window.handleSearch(input.id); });
            });
            const clear = mkRow("ìµœê·¼ ê²€ìƒ‰ì–´ ì§€ìš°ê¸°", ()=>{
              saveRecent([]);
              renderDropdown(dd, input, "");
            });
            clear.style.color = "#b91c1c";
          }
          show(dd);
          return;
        }

        // ì—°ê´€ê²€ìƒ‰ (ë¶€ë¶„ ê²€ìƒ‰): contains / starts / compact ë§¤ì¹­
        const matches = WIKI_LIST
          .map(it=>({it, s: score(it, query)}))
          .filter(x=>x.s>0)
          .sort((a,b)=> b.s-a.s || a.it.title.localeCompare(b.it.title, 'ko'))
          .slice(0, 10)
          .map(x=>x.it);

        if(matches.length===0){
          mkRow("ì¼ì¹˜í•˜ëŠ” ë¬¸ì„œê°€ ì—†ìŠµë‹ˆë‹¤", ()=>{}, true);
        } else {
          matches.forEach(it=>{
            mkRow(it.title, ()=>{
              pushRecent(query);
              location.href = it.href;
            }, false, it.href);
          });
        }
        show(dd);
      }

      function showModalResults(query, items){
        let modal = document.getElementById("hb-search-modal");
        if(!modal){
          modal = document.createElement("div");
          modal.id = "hb-search-modal";
          modal.style.position = "fixed";
          modal.style.inset = "0";
          modal.style.background = "rgba(0,0,0,0.4)";
          modal.style.zIndex = "10000";
          modal.style.display = "none";
          modal.innerHTML = `
            <div data-close="1" style="position:absolute; inset:0;"></div>
            <div style="position:relative; margin:80px auto 0; width:min(820px,94vw); background:var(--wiki-box-bg); color:var(--wiki-text); border-radius:18px; overflow:hidden; box-shadow:0 20px 50px rgba(0,0,0,0.35); border:1px solid rgba(0,0,0,0.08);">
              <div style="display:flex; align-items:center; justify-content:space-between; padding:12px 14px; border-bottom:1px solid rgba(0,0,0,0.08);">
                <div style="font-weight:900; font-size:14px;">ê²€ìƒ‰ ê²°ê³¼</div>
                <button type="button" data-close="1" style="padding:6px 10px; border-radius:10px; border:0; background:rgba(0,0,0,0.04); cursor:pointer; color:var(--wiki-text);">ë‹«ê¸°</button>
              </div>
              <div style="padding:12px 14px;">
                <div id="hb-search-meta" style="font-size:12px; color:#888; margin-bottom:10px;"></div>
                <div id="hb-search-list" style="border-top:1px solid rgba(0,0,0,0.06);"></div>
              </div>
            </div>
          `;
          modal.addEventListener("click", (e)=>{
            const t = e.target;
            if(t && t.getAttribute && t.getAttribute("data-close")==="1") close();
          });
          document.body.appendChild(modal);
        }

        const meta = modal.querySelector("#hb-search-meta");
        const list = modal.querySelector("#hb-search-list");
        meta.textContent = `â€œ${query}â€ ê²°ê³¼ ${items.length}ê±´`;
        list.innerHTML = "";

        if(items.length===0){
          const empty = document.createElement("div");
          empty.style.padding = "12px 0";
          empty.style.color = "#888";
          empty.style.fontSize = "13px";
          empty.textContent = "ì¼ì¹˜í•˜ëŠ” ë¬¸ì„œê°€ ì—†ìŠµë‹ˆë‹¤.";
          list.appendChild(empty);
        } else {
          items.slice(0,30).forEach(it=>{
            const row = document.createElement("a");
            row.href = it.href;
            row.style.display = "block";
            row.style.padding = "12px 6px";
            row.style.textDecoration = "none";
            row.style.color = "var(--wiki-text)";
            row.style.borderBottom = "1px solid rgba(0,0,0,0.06)";
            row.innerHTML = `
              <div style="font-weight:900; margin-bottom:3px;">${it.title}</div>
              <div style="font-size:12px; color:#888;">${it.href}</div>
            `;
            list.appendChild(row);
          });
        }

        function open(){ modal.style.display = "block"; document.body.style.overflow = "hidden"; }
        function close(){ modal.style.display = "none"; document.body.style.overflow = ""; }
        modal._hbClose = close;
        open();
      }

      // âœ… handleSearch ì—…ê·¸ë ˆì´ë“œ: '_'=ê³µë°± ë™ë“± ì²˜ë¦¬ + ì •í™•ì¼ì¹˜ ìš°ì„  + ë¶€ë¶„ì¼ì¹˜ ê²°ê³¼ëŠ” ëª¨ë‹¬ë¡œ
      window.handleSearch = function(inputId){
        const input = document.getElementById(inputId);
        if(!input) return;
        const qRaw = norm(input.value);
        if(!qRaw) return;

        // ìˆ«ìë§Œ ì…ë ¥ => ë²„ìŠ¤ í˜ì´ì§€ ê·œì¹™ ìœ ì§€
        if(/^\d+$/.test(qRaw)){
          pushRecent(qRaw);
          location.href = `bus_${qRaw}.html`;
          return;
        }

        const qKey = toKey(qRaw);
        const qComp = toCompactKey(qRaw);

        // 1) ì •í™•ì¼ì¹˜(ì œëª©/íŒŒì¼ëª…) ìš°ì„ 
        const exact = WIKI_LIST.find(it=> it.key === qKey || it.fileKey === qKey );
        if(exact){
          pushRecent(qRaw);
          location.href = exact.href;
          return;
        }

        // 2) ë¶€ë¶„ì¼ì¹˜ ëª¨ë‹¬
        const matches = WIKI_LIST
          .map(it=>({it, s: score(it, qRaw)}))
          .filter(x=>x.s>0)
          .sort((a,b)=> b.s-a.s || a.it.title.localeCompare(b.it.title, 'ko'))
          .map(x=>x.it);

        pushRecent(qRaw);

        if(matches.length===0){
          // ë¬¸ì„œ ìƒì„±/ì´ë™ fallback: ê³µë°±ì€ '_'ë¡œ ë°”ê¿”ì„œ íŒŒì¼ëª…í™”
          const file = qRaw.replace(/\s+/g, "_");
          location.href = `${encodeURIComponent(file)}.html`;
          return;
        }

        showModalResults(qRaw, matches);
      };

      function attachAutocomplete(inputId, wrapId){
        const input = document.getElementById(inputId);
        if(!input) return;
        const wrap = wrapId ? document.getElementById(wrapId) : (document.getElementById("hb-main-search-wrap") || input.parentElement);
        const dd = ensureDropdown(input, wrap);

        // ì—”í„°/ESC
        input.addEventListener("keydown", (e)=>{
          if(e.key === "Enter"){
            e.preventDefault();
            hide(dd);
            window.handleSearch(input.id);
          } else if(e.key === "Escape"){
            hide(dd);
            input.blur();
          }
        });

        // ì…ë ¥/í¬ì»¤ìŠ¤ ë•Œ ì—°ê´€ê²€ìƒ‰ ë Œë”
        input.addEventListener("input", ()=>{ renderDropdown(dd, input, input.value); });
        input.addEventListener("focus", ()=>{ renderDropdown(dd, input, input.value); });

        // ë°”ê¹¥ í´ë¦­ ì‹œ ë‹«ê¸°
        document.addEventListener("click", (e)=>{
          if(!e.target) return;
          if(wrap && wrap.contains(e.target)) return;
          hide(dd);
        });

        // ë‹¤í¬ëª¨ë“œ í† ê¸€ ì‹œ ë“œë¡­ë‹¤ìš´ ë°°ê²½ ë°˜ì˜ (ë³€ìˆ˜ ê¸°ë°˜ì´ë¼ ìë™ì´ì§€ë§Œ, hover ë³µê·€ ìƒ‰ìƒ ì•ˆì •í™”)
        const obs = new MutationObserver(()=>{
          // ê°•ì œë¡œ repaint
          dd.style.background = "var(--wiki-box-bg)";
        });
        obs.observe(document.body, { attributes:true, attributeFilter:["class"] });
      }

      // âœ… ëŒ€ë¬¸ ê²€ìƒ‰ì°½ + í—¤ë” ê²€ìƒ‰ì°½ ëª¨ë‘ ì—°ê´€ê²€ìƒ‰ ì ìš©
      attachAutocomplete("mainSearchInput", "hb-main-search-wrap");
      attachAutocomplete("headerSearchInput", "hb-header-search-wrap");
    })();
    </script>


    <script src="assets/wiki_index.js"></script>
    <script src="assets/hb_wiki_core.js"></script>
</body>
</html>
